(this["webpackJsonpgithub-graphql-app"]=this["webpackJsonpgithub-graphql-app"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),c=n(8),o=n.n(c),a=n(3),i=n.n(a),u=n(4),d=n(5),l=n(7),j=n(2),b=(n(14),n(0)),h=function(){return Object(b.jsx)("header",{className:"header",children:Object(b.jsx)("h1",{className:"header__title",children:"Github issues manager"})})},p=(n(16),function(e){var t=["error-message"];return e.error&&t.push("error-message--active"),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:t.join(" "),children:e.error}),Object(b.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.fetchRepositoryInfo()},children:[Object(b.jsxs)("div",{className:"form__wrapper",children:[Object(b.jsx)("label",{htmlFor:"token",children:"Enter Github token"}),Object(b.jsx)("input",{id:"token",type:"password",placeholder:"Token...",onChange:function(t){return e.onChangeStepOneInfo(t.target.id,t.target.value)},onFocus:function(){return e.setError("")}})]}),Object(b.jsxs)("div",{className:"form__wrapper",children:[Object(b.jsx)("label",{htmlFor:"owner",children:"Enter repository owner"}),Object(b.jsx)("input",{id:"owner",type:"text",placeholder:"Owner...",onChange:function(t){return e.onChangeStepOneInfo(t.target.id,t.target.value)},onFocus:function(){return e.setError("")}})]}),Object(b.jsxs)("div",{className:"form__wrapper",children:[Object(b.jsx)("label",{htmlFor:"repo-name",children:"Enter repository name"}),Object(b.jsx)("input",{id:"repository",type:"text",placeholder:"Name...",onChange:function(t){return e.onChangeStepOneInfo(t.target.id,t.target.value)},onFocus:function(){return e.setError("")}})]}),Object(b.jsx)("button",{type:"submit",children:"Find"})]})]})}),m=(n(17),function(e){return Object(b.jsx)("div",{className:e.wrapperClass,children:Object(b.jsxs)("div",{className:e.classes,children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})})}),O=function(){var e=Object(u.a)(i.a.mark((function e(t,n,s){var r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({query:'mutation {\n      addComment(input: {\n        subjectId: "'.concat(t,'",\n        body: "').concat(n,'",\n        clientMutationId: "').concat(n,'"\n      }) {\n        clientMutationId,\n        commentEdge {\n          node {\n            body\n          }\n        }\n      }\n    }')}),e.next=3,fetch("https://api.github.com/graphql",{method:"POST",headers:{Authorization:"token ".concat(s),Accept:"application/json","User-Agent":"request","Content-type":"application/json"},body:r});case 3:return c=e.sent,e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),f=(n(18),function(e){var t=e.active,n=e.setModalActive,r=e.choosenIssue,c=e.token,o=Object(s.useState)(""),a=Object(j.a)(o,2),i=a[0],u=a[1],d=Object(s.useState)(!1),l=Object(j.a)(d,2),h=l[0],p=l[1],f=Object(s.useState)(""),x=Object(j.a)(f,2),v=x[0],g=x[1],y=Object(s.useState)(""),w=Object(j.a)(y,2),N=w[0],_=w[1],C=["modal"],k=["modal-content"];t&&(C.push("modal--active"),k.push("modal-content--active"));var S=function(e){u(e.target.value)},I=function(e){e.preventDefault(),p(!0),O(r.id,i,c).then((function(e){if(!e.data)throw new Error("Error! Check entering data and try again.");u(""),p(!1),g(e.data.addComment.commentEdge.node.body),setTimeout((function(){g(""),n(!1)}),3e3)})).catch((function(e){u(""),_("Error! Check entering data and try again."),p(!1),setTimeout((function(){_("")}),3e3)}))};return Object(b.jsx)("div",{className:C.join(" "),onClick:function(){return n(!1)},children:Object(b.jsxs)("div",{className:k.join(" "),onClick:function(e){return e.stopPropagation()},children:[Object(b.jsxs)("div",{className:"modal-content__title",children:["Issue: ",r.title]}),v?Object(b.jsxs)("h3",{style:{textAlign:"center"},children:['Your commentary "',v,'" was successfully pushed!']}):N?Object(b.jsx)("h3",{style:{textAlign:"center"},children:N}):void 0,function(){if(!v&&!N)return h?Object(b.jsx)(m,{classes:"lds-spinner lds-spinner--active",wrapperClass:"spinner-modal"}):Object(b.jsxs)("form",{className:"modal-content__form",onSubmit:I,children:[Object(b.jsx)("textarea",{className:"modal-content__textarea",cols:"30",rows:"10",onChange:S,value:i}),Object(b.jsx)("button",{className:"modal-content__btn",children:"Comment"})]})}()]})})}),x=(n(19),function(){var e=Object(u.a)(i.a.mark((function e(t,n,s){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({query:'{\n        repository(owner: "'.concat(n,'", name: "').concat(s,'") {\n          issues(last: 100, states: OPEN) {\n            edges {\n              node {\n                title\n                bodyText\n                url\n                id \n                comments(last: 100) {\n                  edges {\n                    node {\n                      bodyText\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }')}),e.next=3,fetch("https://api.github.com/graphql",{method:"POST",headers:{Authorization:"token ".concat(t),Accept:"application/json","User-Agent":"request","Content-type":"application/json"},body:r});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}()),v=(n(20),function(e){var t=e.title,n=e.text,s=e.comments,r=e.url,c=e.id,o=e.setModalActive,a=e.setChoosenIssue;return Object(b.jsxs)("div",{className:"issue-card",id:c,children:[Object(b.jsxs)("div",{className:"issue-card__title",children:[Object(b.jsx)("h3",{children:"Title:"})," ",t]}),Object(b.jsxs)("div",{className:"issue-card__text",children:[Object(b.jsx)("h3",{children:"Text"}),": ",n]}),Object(b.jsxs)("div",{className:"issue-card__comments",children:[Object(b.jsx)("h3",{children:"Comments number"}),": ",s]}),Object(b.jsxs)("div",{className:"issue-card__url",children:[Object(b.jsx)("h3",{children:"Issue URL:"})," ",Object(b.jsx)("a",{href:r,children:r})]}),Object(b.jsx)("div",{className:"issue-card__button-container",children:Object(b.jsx)("button",{className:"issue-card__btn",onClick:function(){o(!0),a({title:t,id:c})},children:"Leave comment"})})]})}),g=(n(21),function(e){var t=e.issues,n=e.startNewSearch,s=e.modalActive,r=e.setModalActive,c=e.setChoosenIssue,o=e.fetchRepositoryInfo,a=e.repositoryInfo;return Object(b.jsxs)("div",{className:"issues-wrapper",children:[Object(b.jsxs)("div",{className:"issues-wrapper__button-container",children:[Object(b.jsx)("button",{className:"issues-wrapper__btn",onClick:n,children:"New search"}),Object(b.jsx)("button",{className:"issues-wrapper__btn",onClick:function(){var e=a.token,t=a.owner,n=a.repository;o(e,t,n)},children:"Refresh"})]}),t.map((function(e){var t=e.node;return Object(b.jsx)(v,{id:t.id,title:t.title,text:t.bodyText,comments:t.comments.edges.length,url:t.url,setModalActive:r,modalActive:s,setChoosenIssue:c},t.id)}))]})}),y=function(){var e=Object(s.useState)({}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(!1),o=Object(j.a)(c,2),a=o[0],O=o[1],v=Object(s.useState)(""),y=Object(j.a)(v,2),w=y[0],N=y[1],_=Object(s.useState)(""),C=Object(j.a)(_,2),k=C[0],S=C[1],I=Object(s.useState)(!1),A=Object(j.a)(I,2),E=A[0],T=A[1],M=Object(s.useState)({}),q=Object(j.a)(M,2),F=q[0],R=q[1],J=function(e,t){r((function(n){return Object(l.a)(Object(l.a)({},n),{},Object(d.a)({},e,t))}))},P=function(){var e=Object(u.a)(i.a.mark((function e(){var t,s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.token,s=n.owner,r=n.repository,N(""),O(!0),x(t,s,r).then((function(e){if(!e.ok)throw O(!1),N("Error while loading from url: ".concat(e.url,". Correct the entered data!")),new Error("Error! ".concat(e.status));return e.json()})).then((function(e){e.errors&&(O(!1),N(e.errors[0].message)),S(e.data),O(!1)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){S("")};return Object(s.useEffect)((function(){document.body.style.overflowY=E?"hidden":""}),[E]),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(h,{}),function(){if(!k.repository)return a?Object(b.jsx)(m,{classes:"lds-spinner",wrapperClass:"spinner"}):Object(b.jsx)(p,{setError:N,error:w,fetchRepositoryInfo:P,onChangeStepOneInfo:J})}(),function(){if(k.repository)return Object(b.jsx)(g,{fetchRepositoryInfo:P,repositoryInfo:n,issues:k.repository.issues.edges,startNewSearch:U,setModalActive:T,modalActive:E,setChoosenIssue:R})}(),Object(b.jsx)(f,{active:E,setModalActive:T,choosenIssue:F,token:n.token})]})};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(y,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.5f5d7141.chunk.js.map